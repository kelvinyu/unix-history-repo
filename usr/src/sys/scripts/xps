define xps

	set $p = allproc

	printf "      proc   pid      flag st      wchan comm\n"
	while ($p)
		printf "%#10x %5d %8x  %2x %#10x %s", $p, $p->p_pid, \
			$p->p_flag, $p->p_stat, $p->p_wchan, \
			(char *) $p->p_comm
		if ($p->p_wmesg)
			printf " (%s)", $p->p_wmesg
		end
		printf "\n"
		set $p = $p->p_nxt
	end
end
